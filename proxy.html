<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆê°„ë‹¨ Proxy ì˜ˆì œ</title>
    <span id="display">0</span>
    <div>
        <!-- 1) ì¦ê°€ ë²„íŠ¼ í´ë¦­, increase ì‹¤í–‰ -->
        <button onclick="increase()">â• ì¦ê°€</button>
        <button onclick="decrease()">â– ê°ì†Œ</button>
        <button onclick="reset()">ğŸ”„ ë¦¬ì…‹</button>
    </div>
</head>
<body>
    <div id="root"></div>
    <script>
        // target ì´ ëŒ€ìƒ ê°ì²´, count ê°€ ì†ì„±
        const target = { count: 0 };

        function updateDisplay(){
            document.getElementById('display').textContent = target.count; 
        }

        const handler = {
            // target : ëŒ€ìƒ ê°ì²´
            // property : ê°ì²´ ì†ì„±
            // value : Proxyì˜ set íŠ¸ë©ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ì´ë¯¸ ê³„ì‚°ëœ ìƒˆë¡œìš´ ê°’

            // JS ì—”ì§„ì€ ìƒˆë¡œìš´ ê°’(ì„ ì´ë¯¸ ê³„ì‚°í•´ì„œ, set ì— value ë¡œ ì „ë‹¬
            set(target, property, value){
                target[property] = value; 
                updateDisplay() // í™”ë©´ ë°˜ì˜
                return true; 
            }
        }

        const reactiveTarget = new Proxy(target, handler)

        // 2. increase í•¨ìˆ˜ ì‹¤í–‰
        function increase(){
            // reactiveTarget ëŠ” target ì„ ê°ì‹¸ê³  ìˆëŠ” proxy ê°ì²´
            // ++ ì—ì„œ ê°’ì´ ë³€ê²½ë  ë•Œ handler ì˜ set íŠ¸ë© í˜¸ì¶œ
            reactiveTarget.count++; 
        }

        function decrease(){
            reactiveTarget.count--; 
        }

        function reset(){
            reactiveTarget.count = 0; 
        }
    </script>
</body>
</html>